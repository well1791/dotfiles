theme = "rose_pine"

[editor]
mouse = true
gutters = ["spacer", "diagnostics", "spacer", "diff"]
auto-save = true
end-of-line-diagnostics = "hint"
true-color = true
shell = ["fish", "-c"]
scrolloff = 10
completion-trigger-len = 1

[editor.inline-diagnostics]
cursor-line = "error"
other-lines = "disable"

[editor.cursor-shape]
insert = "bar"
normal = "block"
select = "underline"

[editor.file-picker]
hidden = false

[editor.soft-wrap]
enable = true
max-wrap = 25

[editor.lsp]
display-messages = true
auto-signature-help = true

[editor.statusline]
left = ["mode", "spinner"]
center = ["file-name"]
right = [
  "diagnostics",
  "selections",
  "position",
  "file-encoding",
  "file-line-ending",
]
separator = "â”‚"
mode.normal = "N"
mode.insert = "I"
mode.select = "S"

[keys.normal]
h = ":noop"
j = ["move_prev_word_start", "trim_selections"]
l = ["move_next_word_end", "trim_selections"]
i = "move_visual_line_up"
k = "move_visual_line_down"
# |-- OTHERS
esc = ["collapse_selection", "keep_primary_selection"]
"u" = [
  "move_next_word_start",
  "select_mode",
  "insert_at_line_end",
  "move_line_up",
  "goto_prev_paragraph",
  "normal_mode",
  "goto_next_paragraph",
  "goto_prev_paragraph",
  "trim_selections",
  "collapse_selection",
]  # go to prev paragraph start
"U" = [
  "move_next_word_start",
  "select_mode",
  "insert_at_line_end",
  "move_line_up",
  "goto_prev_paragraph",
  "normal_mode",
  "goto_next_paragraph",
  "goto_prev_paragraph",
  "trim_selections",
  "collapse_selection",
]  # go to prev paragraph end
"o" = [
  "move_next_word_end",
  "select_mode",
  "insert_at_line_start",
  "move_line_down",
  "goto_next_paragraph",
  "normal_mode",
  "goto_prev_paragraph",
  "goto_next_paragraph",
  "trim_selections",
  "collapse_selection",
]  # go to next paragraph end
"O" = [
  "move_next_word_end",
  "select_mode",
  "insert_at_line_start",
  "move_line_down",
  "goto_next_paragraph",
  "normal_mode",
  "goto_prev_paragraph",
  "goto_next_paragraph",
  "trim_selections",
  "collapse_selection",
]  # go to next paragraph start
"A-i" = [
  "extend_to_line_bounds",
  "delete_selection",
  "move_line_up",
  "paste_before",
  "flip_selections",
]  # Move line(s) up
"A-k" = [
  "extend_to_line_bounds",
  "delete_selection",
  "paste_after",
  "select_mode",
  "goto_line_start",
  "normal_mode",
]  # Move line(s) down
"," = "undo"
"." = "redo"

[keys.normal.g]
i = "goto_file_start"
k = "goto_file_end"
j = "goto_first_nonwhitespace"
l = "goto_line_end"
a = ":noop"
g = ":noop"
f = ":noop"
n = ":noop"
p = ":noop"
s = ":noop"
d = ":noop"
y = ":noop"
r = ":noop"
# |-- @see https://github.com/helix-editor/helix/issues/1630#issuecomment-1511995639
# s = [
#   "collapse_selection",
#   "select_mode",
#   "goto_first_nonwhitespace",
#   "exit_select_mode",
# ]

[keys.normal.f]
l = "find_till_char"
j = "till_prev_char"
u = "find_prev_char"
o = "find_next_char"

[keys.normal.a]
l = "append_mode"
j = "insert_mode"
i = "open_above"
k = "open_below"
o = "change_selection"
O = "change_selection_noyank"

[keys.normal.A]
l = "insert_at_line_end"
j = "insert_at_line_start"

[keys.normal.b]
r = [":reload-all", ":redraw"]
s = ":write-all!"
w = ":write-all!"
b = "buffer_picker"
j = "goto_previous_buffer"
l = "goto_next_buffer"
c = ":write-buffer-close!"
C = ":buffer-close-others"

[keys.normal.c]
a = "code_action"
k = "hover"
c = "toggle_comments"
e = "rename_symbol"
x = ":write-quit-all!"
q = ":q!"
f = "goto_file"
d = "goto_definition"
y = "goto_type_definition"
r = "goto_reference"

[keys.normal.z]
w = ["half_page_up", "align_view_center"]
s = ["half_page_down", "align_view_center"]

[keys.normal.space]
r = [":config-reload", ":redraw"]
F = "file_picker_in_current_buffer_directory"
c = ":noop"
C = ":noop"
A-c = ":noop"

# |-- CHEZMOI
[keys.normal.space.m]
w = [
  ":write-all!",
  ":sh chezmoi apply -k --force",
  ":redraw",
  ":config-reload",  # not working
]
s = [
  ":write-all!",
  ":sh chezmoi apply -k --force",
  ":redraw",
  ":config-reload",  # not working
]
c = [
  ":write-all!",
  ":sh chezmoi apply -k --force",
  ":write-buffer-close!",
  ":redraw",
  ":config-reload",  # not working
]

[keys.select]
I = ":noop"
"{" = "goto_prev_paragraph"
"}" = "goto_next_paragraph"
# Navigation
h = ":noop"
i = "extend_visual_line_up"
k = "extend_visual_line_down"
j = "extend_prev_word_start"
l = "extend_next_word_end"

[keys.select.g]
h = ":noop"
i = "extend_to_file_start"
k = "extend_to_file_end"
j = "extend_to_first_nonwhitespace"
l = "extend_to_line_end"
