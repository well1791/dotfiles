theme = "rose_pine"

[editor]
mouse = true
gutters = ["spacer", "diagnostics", "spacer", "diff"]
auto-save = true
end-of-line-diagnostics = "hint"
true-color = true
shell = ["fish", "-c"]
scrolloff = 10
completion-trigger-len = 1
popup-border = "all"

[editor.inline-diagnostics]
cursor-line = "error"
other-lines = "disable"

[editor.cursor-shape]
insert = "bar"
normal = "block"
select = "underline"

[editor.file-picker]
hidden = false

[editor.soft-wrap]
enable = true
max-wrap = 25

[editor.lsp]
display-messages = true
auto-signature-help = true

[editor.statusline]
left = ["mode", "spinner"]
center = ["file-name"]
right = [
  "diagnostics",
  "selections",
  "position",
  "file-encoding",
  "file-line-ending",
]
separator = "â”‚"
mode.normal = "N"
mode.insert = "I"
mode.select = "S"

[keys.normal]
esc = ["collapse_selection", "keep_primary_selection"]
# RIGHT
j = ["move_prev_word_start", "trim_selections"]
l = ["move_next_word_end", "trim_selections"]
i = "move_visual_line_up"
S-i = "goto_file_start"
A-i = [
  "extend_to_line_bounds",
  "delete_selection",
  "move_line_up",
  "paste_before",
  "flip_selections",
]  # Move line(s) up
k = "move_visual_line_down"
S-k = "goto_file_end"
A-k = [
  "extend_to_line_bounds",
  "delete_selection",
  "paste_after",
  "select_mode",
  "goto_line_start",
  "normal_mode",
]  # Move line(s) down
u = "goto_first_nonwhitespace"
S-u = ":noop"
C-u = ":noop"
o = "goto_line_end"
S-o = ":noop"
C-o = ":noop"
h = "undo"
S-h = "redo"
# LEFT
w = "page_cursor_half_up"
S-w = "goto_prev_paragraph"
A-w = ":noop"
s = "page_cursor_half_down"
S-s = "goto_next_paragraph"
# C-s = ":noop"
A-s = ":noop"
e = "select_regex"
S-e = "split_selection"
# C-e = ":noop"
A-e = "split_selection_on_newline"
C-d = ":noop"
S-x = ["extend_line_up", "extend_to_line_bounds"]

[keys.select]
# RIGHT
j = "extend_prev_word_start"
l = "extend_next_word_end"
i = "extend_visual_line_up"
S-i = "extend_to_file_start"
C-i = ":noop"
A-i = ":noop"
k = "extend_visual_line_down"
S-k = "extend_to_file_end"
C-k = ":noop"
A-k = ":noop"
u = "extend_to_first_nonwhitespace"
S-u = ":noop"
C-u = ":noop"
A-u = ":noop"
o = "extend_to_line_end"
S-o = ":noop"
C-o = ":noop"
h = "undo"
S-h = "redo"
# LEFT
w = "page_cursor_half_up"
S-w = "goto_prev_paragraph"
A-w = ":noop"
s = "page_cursor_half_down"
S-s = "goto_next_paragraph"
# C-s = ":noop"
# A-s = ":noop"
e = "select_regex"
S-e = "split_selection"
# C-e = ":noop"
A-e = "split_selection_on_newline"
C-d = ":noop"
S-c = ":noop"
A-c = ":noop"
S-x = ["extend_line_up", "extend_to_line_bounds"]

[keys.normal.a]
j = "insert_mode"
l = "append_mode"
u = "insert_at_line_start"
o = "insert_at_line_end"
i = "open_above"
k = "open_below"
";" = "change_selection"
":" = "change_selection_noyank"

[keys.select.a]
j = "insert_mode"
l = "append_mode"
u = "insert_at_line_start"
o = "insert_at_line_end"
i = "open_above"
k = "open_below"
";" = "change_selection"
":" = "change_selection_noyank"

[keys.normal.b]
r = [":reload-all", ":redraw"]
s = ":write-all!"
w = ":write-all!"
b = "buffer_picker"
j = "goto_previous_buffer"
l = "goto_next_buffer"
c = ":write-buffer-close"
S-c = ":write-buffer-close!"
A-c = ":buffer-close-others"
d = ":write-buffer-close"
S-d = ":write-buffer-close"
A-d = ":buffer-close-others"
k = ":write-buffer-close"
x = ":buffer-close-all"

[keys.select.b]
r = [":reload-all", ":redraw"]
s = ":write-all!"
w = ":write-all!"
b = "buffer_picker"
j = "goto_previous_buffer"
l = "goto_next_buffer"
c = ":write-buffer-close"
S-c = ":write-buffer-close!"
A-c = ":buffer-close-others"
d = ":write-buffer-close"
S-d = ":write-buffer-close"
A-d = ":buffer-close-others"
k = ":write-buffer-close"
x = ":buffer-close-all"

[keys.normal.c]
a = "code_action"
k = "hover"
c = "toggle_comments"
e = "rename_symbol"
x = ":write-quit-all!"
q = ":q!"
f = "goto_file"
d = "goto_definition"
S-d = "goto_declaration"
y = "goto_type_definition"
r = "goto_reference"
s = "symbol_picker"
h = "select_references_to_symbol_under_cursor"

[keys.select.c]
a = "code_action"
k = "hover"
c = "toggle_comments"
e = "rename_symbol"
x = ":write-quit-all!"
q = ":q!"
f = "goto_file"
d = "goto_definition"
S-d = "goto_declaration"
y = "goto_type_definition"
r = "goto_reference"
s = "symbol_picker"
h = "select_references_to_symbol_under_cursor"

[keys.normal.f]
j = "till_prev_char"
l = "find_till_char"
u = "find_prev_char"
o = "find_next_char"

[keys.select.f]
j = "till_prev_char"
l = "find_till_char"
u = "find_prev_char"
o = "find_next_char"

[keys.normal.p]
i = "paste_before"
k = "paste_after"
j = "paste_before"
l = "paste_after"

[keys.normal.t]
d = "goto_next_diag"
S-d = "goto_last_diag"
g = "goto_next_change"
S-g = "goto_last_change"
f = "goto_next_function"
t = "goto_next_class"
S-t = "goto_next_test"
a = "goto_next_parameter"
c = "goto_next_comment"
e = "goto_next_entry"
y = "goto_next_tabstop"
i = "add_newline_above"
k = "add_newline_below"

[keys.select.t]
d = "goto_next_diag"
S-d = "goto_last_diag"
g = "goto_next_change"
S-g = "goto_last_change"
f = "goto_next_function"
t = "goto_next_class"
S-t = "goto_next_test"
a = "goto_next_parameter"
c = "goto_next_comment"
e = "goto_next_entry"
y = "goto_next_tabstop"
i = "add_newline_above"
k = "add_newline_below"

[keys.normal.T]
d = "goto_prev_diag"
S-d = "goto_first_diag"
g = "goto_prev_change"
S-g = "goto_first_change"
f = "goto_prev_function"
t = "goto_prev_class"
S-t = "goto_prev_test"
a = "goto_prev_parameter"
c = "goto_prev_comment"
e = "goto_prev_entry"
y = "goto_prev_tabstop"
i = "add_newline_above"
k = "add_newline_below"

[keys.select.T]
d = "goto_prev_diag"
S-d = "goto_first_diag"
g = "goto_prev_change"
S-g = "goto_first_change"
f = "goto_prev_function"
t = "goto_prev_class"
S-t = "goto_prev_test"
a = "goto_prev_parameter"
c = "goto_prev_comment"
e = "goto_prev_entry"
y = "goto_prev_tabstop"
i = "add_newline_above"
k = "add_newline_below"

[keys.normal.Z]
s = ["move_prev_word_start", "trim_selections"]
f = ["move_next_word_end", "trim_selections"]
e = "move_visual_line_up"
S-e = "page_cursor_half_up"
d = "move_visual_line_down"
S-d = "page_cursor_half_down"

[keys.normal.space]
r = [":config-reload", ":redraw"]
S-f = "file_picker_in_current_buffer_directory"
c = ":noop"
S-c = ":noop"
A-c = ":noop"

[keys.select.space]
r = [":config-reload", ":redraw"]
S-f = "file_picker_in_current_buffer_directory"
c = ":noop"
S-c = ":noop"
A-c = ":noop"

# |-- CHEZMOI
[keys.normal.space.m]
w = [
  ":write-all!",
  ":sh chezmoi apply -k --force",
  ":redraw",
  ":config-reload",  # not working
]
s = [
  ":write-all!",
  ":sh chezmoi apply -k --force",
  ":redraw",
  ":config-reload",  # not working
]
c = [
  ":write-all!",
  ":sh chezmoi apply -k --force",
  ":write-buffer-close!",
  ":redraw",
  ":config-reload",  # not working
]
